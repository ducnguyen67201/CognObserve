# ============================================================
# DOPPLER SECRET MANAGEMENT
# ============================================================
#
# This project uses Doppler for centralized secret management.
# This file is for REFERENCE ONLY - do not copy to .env with real secrets.
#
# Setup Instructions:
#   1. Install Doppler CLI: brew install dopplerhq/cli/doppler
#   2. Login: doppler login
#   3. Configure: doppler setup --no-interactive
#   4. Run commands: doppler run -- <command>
#
# Example usage:
#   doppler run -- pnpm dev
#   doppler run -- pnpm db:studio
#   cd apps/ingest && doppler run -- go run ./cmd/ingest
#
# See: docs/specs/issue-104-doppler-secret-management.md
#
# ============================================================

# Database
DATABASE_URL="postgresql://cognobserve:cognobserve@localhost:5432/cognobserve"

# App
NODE_ENV="development"

# ============================================================
# NextAuth Configuration
# ============================================================

# Required: Secret for JWT signing (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET="your-auth-secret-min-32-chars-change-in-production"

# Required: Base URL of your application
NEXTAUTH_URL="http://localhost:3000"

# ============================================================
# OAuth Providers (Optional - leave empty to disable)
# ============================================================

# Google OAuth (https://console.cloud.google.com/)
AUTH_GOOGLE_ID=""
AUTH_GOOGLE_SECRET=""

# GitHub OAuth (https://github.com/settings/developers)
AUTH_GITHUB_ID=""
AUTH_GITHUB_SECRET=""

# ============================================================
# JWT Configuration (Cross-service auth)
# ============================================================

# Shared secret for cross-service JWT validation
# MUST be the same across Web, Ingest, and Worker
# Generate with: openssl rand -base64 32
JWT_SHARED_SECRET="your-jwt-shared-secret-min-32-chars-change-in-production"

# ============================================================
# Internal API Communication
# ============================================================

# Secret for Go ingest -> Web API internal calls
# Used to protect /api/internal/* endpoints
# Generate with: openssl rand -hex 32
INTERNAL_API_SECRET="your-internal-api-secret-min-32-chars-change-in-production"

# Go Ingest Service -> Web API URL
WEB_API_URL="http://localhost:3000"

# ============================================================
# GitHub Configuration (RCA System)
# ============================================================

# Secret for validating GitHub webhook signatures
# Must match the secret configured in your GitHub repository webhook settings
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=""

# GitHub App Configuration (for OAuth installation flow)
# Create a GitHub App at: https://github.com/settings/apps/new
GITHUB_APP_ID=""
GITHUB_APP_NAME=""
GITHUB_APP_CLIENT_ID=""
GITHUB_APP_CLIENT_SECRET=""
GITHUB_APP_PRIVATE_KEY=""

# Secret for signing OAuth state tokens (optional - falls back to NEXTAUTH_SECRET)
# Generate with: openssl rand -base64 32
GITHUB_STATE_SECRET=""

# ============================================================
# API Key Configuration
# ============================================================

# Prefix for generated API keys (e.g., co_sk_abc123...)
API_KEY_PREFIX="co_sk_"

# Number of random bytes for API key entropy (32 = 256 bits)
API_KEY_RANDOM_BYTES_LENGTH="32"

# Character set for base62 encoding (alphanumeric, URL-safe)
API_KEY_BASE62_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"

# ============================================================
# Temporal Configuration (Required)
# ============================================================

# Temporal server address
TEMPORAL_ADDRESS="localhost:7233"

# Temporal namespace (created automatically by auto-setup image)
TEMPORAL_NAMESPACE="default"

# Task queue for workflow/activity dispatch
TEMPORAL_TASK_QUEUE="cognobserve-tasks"

# ============================================================
# SMTP Configuration (Optional - for email notifications)
# ============================================================

# SMTP server settings
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM=""

# ============================================================
# OpenAI Configuration (Required for embedding generation)
# ============================================================

# OpenAI API key for generating code embeddings
# Get your API key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=""

# ============================================================
# Redis Configuration (Required for embedding cache)
# ============================================================

# Redis URL for caching embeddings (30-day TTL)
# Reduces embedding API costs by ~50% on re-index
REDIS_URL="redis://localhost:6379"
